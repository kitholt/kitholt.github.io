<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">学习春天の云（springCloud） | 欢迎来到Franの杂货铺</title>
  
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <meta name="browsermode" content="application">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "KItholtFrank";
  mashiro_option.author_name = "Frank";
  mashiro_option.site_url = "https://kitholt.github.io/";
  mashiro_option.v_appId = "vK4njxg3C8GQOr9L6M8Hav7x-gzGzoHsz";
  mashiro_option.v_appKey = "e9eG1y4IcG54g4l676M1xeWQ";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/kitholt/cdn/img/warriors.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/best.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/curry.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/chase.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/stadium.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/splashbros.webp,https://cdn.jsdelivr.net/gh/kitholt/cdn/img/coolkt.webp,".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body oncopy="alert('I know what u want 2 do...');return false;" leftmargin="2" topmargin="0" marginwidth="0" marginheight="0" oncontextmenu="return false" ondragstart="return true" onselectstart ="return tfalse" onselect="document.selection.empty()" onbeforecopy="return false" onmouseup="document.selection.empty()"  class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dim">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://kitholt.github.io/">
          <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/kt3.jpeg">
        </a>
      </div>
      <div class="header-info">
        <p>你来啦!欢迎来到Franの杂货铺！</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/kitholt" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialgithub.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://weibo.com/u/7188904314" target="_blank" class="social-github" title="sina">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialsina.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/my/m/music/playlist?id=890672374" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialwangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/frank-41-24-53" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialzhihu.png">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialwechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/socialQR.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">KItholt</span>
            <span class="shironeko">Frank</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    资瓷
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/jsjwlrigid.png);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/jsjwlrigid.png">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      学习春天の云（springCloud）</h1>
      <p class="entry-census">
        <span>
          <a href="">
            <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/kt3.jpeg">
          </a>
        </span>
        <span>
          <a href=""></a>
        </span>
        <span class="bull">
        ·</span>
        2021-7-12<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h1 id="学习春天の云"><a href="#学习春天の云" class="headerlink" title="学习春天の云"></a>学习春天の云</h1><h2 id="①微服务？"><a href="#①微服务？" class="headerlink" title="①微服务？"></a>①微服务？</h2><h3 id="灵魂提问：什么是微服务？"><a href="#灵魂提问：什么是微服务？" class="headerlink" title="灵魂提问：什么是微服务？"></a>灵魂提问：什么是微服务？</h3><p>微服务是一种架构风格，是一种架构设计方式，一个大型复杂软件应用由一个或多个微服务组成。系统中的各个微服务可被独立部署，各个微服务之间是松耦合的。每个微服务仅关注于完成一件任务并很好地完成该任务。在所有情况下，每个任务代表着一个小的业务能力。</p>
<h3 id="威神么（为什么）要微服务，它的好处都有啥？"><a href="#威神么（为什么）要微服务，它的好处都有啥？" class="headerlink" title="威神么（为什么）要微服务，它的好处都有啥？"></a>威神么（为什么）要微服务，它的好处都有啥？</h3><p> 传统开发模式下，绝大多数的web应用都是<span style="color:blue"><em>单体</em></span>架构的风格来进行构建，这就使得所有的接口，业务逻辑层，数据持久层全部都被打包在一个web应用中，并且布置在一台服务器上，使得不同的模块之前也高耦合在一起，这种开发模式使得多团队协作开发的开发成本极高。<span style="color:red"><strong>因此不难看出，如果在后期，项目的某个部分需要调整，就会导致“牵一发而动全身”的结果。</strong></span></p>
<h3 id="它的优点："><a href="#它的优点：" class="headerlink" title="它的优点："></a>它的优点：</h3><p> 1.各个服务的开发、测试、部署都是相互独立的。可以针对某一个特定的服务进行更多的操作，比如负载均衡等。</p>
<ol start="2">
<li><p>当有一个新的需求加入时，传统项目需要结合各方面考虑影响等，微服务就不存在这样的问题，省事省力又省心。</p>
<p>3.使用微服务将项目拆分后，只需要保证对外接口的正常运行，大大降低了各个模块之间的耦合性，极大的提高开发效率。</p>
</li>
</ol>
<h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><p> 1.微服务的拆分基于业务，不能随心所欲的拆分，所以如何拆分，对于项目架构来说是非常重要且极具挑战的任务。</p>
<p>  2.涉及到服务之间的调用时，常常需要和另外一个服务的提供方进行沟通，若是两个完全不同的公司或者部门，沟通成本比较大；某服务的对外接口要进行修改，也需要与其他服务调用方进行沟通。</p>
<p>  3.由于各个服务相互独立，数据也是独立，当多个服务的接口进行操作时，如何保证数据的一致性是一个难点。数据统一性是微服务里面的一个难题。</p>
<h3 id="利用微服务框架实现分布式系统（Spring-Cloud）"><a href="#利用微服务框架实现分布式系统（Spring-Cloud）" class="headerlink" title="利用微服务框架实现分布式系统（Spring Cloud）"></a>利用微服务框架实现<span style="color:green">分布式系统</span>（Spring Cloud）</h3><p> 1.Spring Cloud是完全基于Spring Boot，服务调用是基于REST API  ，整合了各种成熟的产品和架构，同时基于Spring Boot也使得整体的开发、配置、部署都非常的方便。</p>
<p>  2.Spring系列的产品具备功能齐全、简单好用、性能优美、文档规范等优点。</p>
<h4 id="SC的架构图"><a href="#SC的架构图" class="headerlink" title="SC的架构图"></a>SC的架构图</h4><p><img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/imgspring_cloud.png" alt></p>
<h4 id="SC的核心组件"><a href="#SC的核心组件" class="headerlink" title="SC的核心组件"></a>SC的核心组件</h4><p><img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/imgspring_cloud2.png" alt></p>
<p>服务治理<span style="font-size:30px">Eureka=（Eureka Client）+（Eureka Server）</span>（三大核心、两大步骤）</p>
<ul>
<li>服务治理的核心由三部分组成：<ul>
<li>服务提供者</li>
<li>服务消费者</li>
<li>注册中心</li>
</ul>
</li>
</ul>
<ol>
<li>服务注册：在分布式系统架构中，每个微服务在启动时，会将自己的信息存储在注册中心。</li>
<li><p>服务发现：服务消费者从注册中心获取服务提供者的信息，通过这些信息调用服务提供者的服务。</p>
<h2 id="②注册中心"><a href="#②注册中心" class="headerlink" title="②注册中心"></a>②注册中心</h2></li>
</ol>
<h3 id="如何启动注册中心？"><a href="#如何启动注册中心？" class="headerlink" title="如何启动注册中心？"></a>如何启动注册中心？</h3><p>创建一个父工程（配置springBoot）</p>
<pre><code class="xml">&lt;parent&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
      &lt;version&gt;2.0.7.RELEASE&lt;/version&gt;
  &lt;/parent&gt;

  &lt;dependencies&gt;
      &lt;dependency&gt;
          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
      &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;dependencyManagement&gt;
      &lt;dependencies&gt;
          &lt;dependency&gt;
              &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
              &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
              &lt;version&gt;Finchley.SR2&lt;/version&gt;
              &lt;type&gt;pom&lt;/type&gt;
              &lt;scope&gt;import&lt;/scope&gt;
          &lt;/dependency&gt;
      &lt;/dependencies&gt;
  &lt;/dependencyManagement&gt;
</code></pre>
<p>创建一个子项目，用于配置Eureka</p>
<pre><code class="XML">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;
    &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;

</code></pre>
<p>在子项目中的yml配置文件中配置Eureka的相关属性</p>
<ul>
<li>server.port：（一般默认8761）</li>
<li>eureka.client.register-with-eureka：是否将当前的Eureka Server服务作为客户端进行注册</li>
<li>eureka.client.fetch-registry：是否获取其他Eureka Server服务的数据</li>
<li>eureka.client.service-url.defaultZone：注册中心的访问地址</li>
</ul>
<p>最后一步，在子项目中启动springBoot服务</p>
<p><span style="color:red">另外，需要注意的是。为了解决jdk9以上没有jaxb API 的问题（不然启动会失败哦），还需要在父项目增加以下依赖</span></p>
<pre><code class="xml"> &lt;!--解决jdk9以上没有jaxb Api的问题 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;
            &lt;version&gt;2.3.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;javax.activation&lt;/groupId&gt;
            &lt;artifactId&gt;activation&lt;/artifactId&gt;
            &lt;version&gt;1.1.1&lt;/version&gt;
        &lt;/dependency&gt;

</code></pre>
<p>还有！springBoot和springCloud版本一定要兼容！我就是因为使用了低版本的springCloud（因为视频是19年的，而sprinBoot又是最新的），被折磨了一个上午…</p>
<h2 id="③服务提供者"><a href="#③服务提供者" class="headerlink" title="③服务提供者"></a>③服务提供者</h2><p>与上面的类似</p>
<p>创建子项目provider</p>
<pre><code class="xml"> &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
            &lt;version&gt;3.0.3&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<ol>
<li>spring.application.name ： 当前服务注册在 Eureka Server 上的名称。</li>
<li>eureka.client.service-url.defaultZone ： 注册中⼼的访问地址。  </li>
<li>eureka.instance.prefer-ip-address ： 是否将当前服务的 IP 注册到 Eureka Server。</li>
</ol>
<h2 id="④RestTemplate"><a href="#④RestTemplate" class="headerlink" title="④RestTemplate"></a>④RestTemplate</h2><p>  RestTemplate 是 Spring 框架提供的基于 REST 的服务组件，底层是对 HTTP 请求及响应进⾏了封装， 提供了很多访问 RETS 服务的⽅法，可以简化代码开发。</p>
<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ol>
<li>创建子项目</li>
<li>配置application.yml</li>
<li>创建和服务提供者相同的实体类</li>
<li>创建controller，调用服务提供者的接口</li>
<li>创建启动类（@SpringBootApplication），并将RestTemplate的实例（@Bean）进行注入</li>
</ol>
<h2 id="⑤服务网关"><a href="#⑤服务网关" class="headerlink" title="⑤服务网关"></a>⑤服务网关</h2><h3 id="Zuul（祖鲁？）"><a href="#Zuul（祖鲁？）" class="headerlink" title="Zuul（祖鲁？）"></a>Zuul（祖鲁？）</h3><p>Zuul 是 Netflix 提供的⼀个开源的 API ⽹关服务器，是客户端和⽹站后端所有请求的中间层，对外开放 ⼀个 API，将所有请求导⼊统⼀的⼊⼝，屏蔽了服务端的具体实现逻辑，Zuul 可以实现反向代理的功 能，在⽹关内部实现动态路由、身份认证、IP 过滤、数据监控等。Zuul也是Spring Cloud集成的组件，通过它来实现服务网关。</p>
<h3 id="Zuulの功能"><a href="#Zuulの功能" class="headerlink" title="Zuulの功能"></a>Zuulの功能</h3><ol>
<li><p>身份认证与安全：识别每个资源的验证要求，并拒绝那些与要求不符合的请求。</p>
<ol start="2">
<li><p>审查与监控：在边缘位置追踪有意义的数据和统计结果，从而带来精确的生产视图。</p>
</li>
<li><p>动态路由：动态的将请求路由到不同的后端集群。</p>
</li>
<li><p>压力测试：逐渐增加指向集群的流量，以了解性能。</p>
</li>
</ol>
</li>
<li><p>负载分配：为每一种负载类型分配对应容量，并弃用超出限定值的请求。</p>
</li>
<li><p>静态响应处理：在边缘位置直接建立部分响应，从而避免其转发到内部集群。</p>
</li>
<li><p>多区域弹性：跨越AWS Region进行请求路由，旨在实现ELB（Elastic Load Balancing）使用的多样化，以及让系统的便越更贴近系统的使用者。</p>
</li>
</ol>
<h3 id="Zuul的配置文件（模板）"><a href="#Zuul的配置文件（模板）" class="headerlink" title="Zuul的配置文件（模板）"></a>Zuul的配置文件（模板）</h3><pre><code class="xml">server:
  port: 8030
spring:
  application:
    name: gateway
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
zuul:
  routes:
    provider: /p/**
</code></pre>
<h3 id="Zuul的启动类"><a href="#Zuul的启动类" class="headerlink" title="Zuul的启动类"></a>Zuul的启动类</h3><pre><code class="java">package com.gateway;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.cloud.netflix.zuul.EnableZuulProxy;

@EnableZuulProxy// 包含了 @EnableZuulServer ，设置该类是⽹关的启动类。
@EnableAutoConfiguration
public class GatewayApplication {

    public static void main(String[] args) {
        SpringApplication.run(GatewayApplication.class, args);
    }

}

</code></pre>
<p>备注：在配置zuul的routes的属性时，可能是因为版本的不兼容会出现ErrorController的异常…（还未解决…）</p>
<h2 id="⑥负载均衡"><a href="#⑥负载均衡" class="headerlink" title="⑥负载均衡"></a>⑥负载均衡</h2><p> Ribbon是Sping Cloud的一个组件，Spring Cloud Ribbon是一个负载均衡的解决方案，Ribbon是Netflix发布的负载均衡器，Spring对其进行了集成，Spring Cloud Ribbon是基于Netflix Ribbon实现的，是一个用于对HTTP请求进行控制的负载均衡客户端。Spring Cloud Ribbon也是要结合Eureka Server来使用的，因为也要在注册中心进行注册。在注册中心对Ribbon进行注册之后，Ribbon就可以基于某种负载均衡算法，如轮询、随机、加权轮询、加权随机等自动帮助服务消费者调用接口，开发者也可以根据具体需求自定义Ribbon负载均衡算法。实际开发中，Spring Cloud Eureka来使用，Eureka Server提供所有可以调用的服务提供者列表，Ribbon基于特定的负载均衡算法从这些服务提供者中选择要调用的具体实例。</p>
<ol>
<li><p>yml配置文件（略）</p>
</li>
<li><p>创建启动类</p>
<pre><code class="java">package com.ribbon;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.loadbalancer.LoadBalanced;
import org.springframework.context.annotation.Bean;
import org.springframework.web.client.RestTemplate;

@SpringBootApplication
public class RibbonApplication {
    public static void main(String[] args) throws Exception {
        SpringApplication.run(RibbonApplication.class, args);
    }

    @Bean
    @LoadBalanced//!!!
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }

}
</code></pre>
<p>@LoadBalanced：声明一个基于Ribbon的负载均衡。标注此注解后，RestTemplate就具有了客户端负载均衡的能力。</p>
<ol start="3">
<li><p>Controller层代码</p>
<pre><code class="java">package com.ribbon.controller;

import java.util.Collection;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import com.ribbon.bean.user;

@RestController
@RequestMapping(&quot;/ribbon&quot;)
public class RibbonHandler {

    @Autowired
    private RestTemplate restTemplate;

    @GetMapping(&quot;/findAll&quot;)
    public Collection&lt;Student&gt; findAll(){
        return restTemplate.getForObject(&quot;http://provider/user/findAll&quot;, Collection.class);
    }

    @GetMapping(&quot;/index&quot;)
    public String index() {
        return restTemplate.getForObject(&quot;http://provider/user/index&quot;, String.class);
    }

}
</code></pre>
</li>
</ol>
</li>
</ol>
<h2 id="⑦Feign声明式接口调用（代替ribbon？）"><a href="#⑦Feign声明式接口调用（代替ribbon？）" class="headerlink" title="⑦Feign声明式接口调用（代替ribbon？）"></a>⑦Feign声明式接口调用（代替ribbon？）</h2><ul>
<li><p>什么是Feign？</p>
<p>与Ribbon一样，Feign也是有网飞提供的，Feign是一个声明式、模块化的Web Service的客户端，它简化了开发者编写Web服务客户端的操作，开发者可以通过简单的接口和注解来调用HTTP API，使得开发变得更加简化、快捷。Spring Cloud Feign也是基于Netflix Feign的二次开发，它整合了Ribbon和Hystrix，具有可插拔、基于注解、负载均衡、服务熔断等一系列的便捷功能，也就是说我们在实际开发中可以<span style="color:red"><strong><em>用Feign来取代Ribbon</em></strong>。</span>（好家伙，又“白雪”一节课）</p>
<p> 相比较于Ribbon+RestTemplate的方式，Feign大大简化了代码的开发，Feign支持多种注解，包括Feign注解、JAX-RS注解、Spring MVC注解等，Spring Cloud对Feign进行了优化，整合了Ribbon和Eureka，从而让Feign使用更加方便。</p>
</li>
<li><p>需要的依赖</p>
<pre><code class="xml">&lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p><strong>注意：上面的版本较老</strong></p>
</li>
<li><p>创建启动类</p>
<pre><code class="java">package com.feign;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.openfeign.EnableFeignClients;

@SpringBootApplication
@EnableFeignClients//!!!!!!!!!!!!!!!
public class FeignApplication {
    public static void main(String[] args) throws Exception {
        SpringApplication.run(FeignApplication.class, args);
    }

}
</code></pre>
<p>@EnableFeignClients：声明其为Feign客户端</p>
<hr>
<p>创建声明式接口</p>
</li>
</ul>
<pre><code class="java">package com.feign;

import java.util.Collection;

import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;

import com.feign.bean.user;

@FeignClient(value = &quot;provider&quot;)
public interface IFeignService {

    @GetMapping(&quot;/user/findAll&quot;)
    public Collection&lt;user&gt; findAll();

    @GetMapping(&quot;/user/index&quot;)
    public String index();
}
</code></pre>
<p>controller代码</p>
<pre><code class="java">package com.feign.controller;

import java.util.Collection;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.feign.bean.user;
import com.feign.IFeignService;

@RestController
@RequestMapping(&quot;/feign&quot;)
public class FeignHandler {

    @Autowired
    private IFeignService feignservice;

    @GetMapping(&quot;/findAll&quot;)
    public Collection&lt;user&gt; findAll(){
        return feignservice.findAll();
    }

    @GetMapping(&quot;/index&quot;)
    public String index() {
        return feignservice.index();
    }

}
</code></pre>
<h3 id="服务熔断机制"><a href="#服务熔断机制" class="headerlink" title="服务熔断机制"></a>服务熔断机制</h3><p>什么是服务熔断？</p>
<hr>
<p>服务熔断就好比于保险丝的熔断。一般一个功能有多个微服务完成，假设其中一个微服务出现了问题，为了不造成连锁反应，引发更大损失。此时会在出问题的微服务处“切断”服务。就像保险丝熔断一样，防止火灾。feign提供了这一熔断机制，该机制可在配置文件中开启。</p>
<p> <strong>feign.hystrix.enable：是否开启熔断机制，默认false</strong></p>
<p>创建IFeignService的实现类FeignServiceImpl，在里面定义容错处理机制，通过@Component注解将FeignServiceImpl实例注入到IOC容器</p>
<pre><code class="java">package com.feign.impl;

import java.util.Collection;

import org.springframework.stereotype.Component;

import com.feign.bean.user;
import com.feign.IFeignService;

@Component
public class FeignServiceImpl implements IFeignService{

    @Override
    public Collection&lt;user&gt; findAll() {
        return null;
    }

    @Override
    public String index() {
        return &quot;服务器维护中。。。&quot;;
    }

}
</code></pre>
<p>在IFeignService接口定义处定义@FeignClient的fallback属性来做降级处理，设置映射，映射到FeignServiceImpl中去。修改IFeignService后代码如下：</p>
<pre><code class="java">package com.feign;

import java.util.Collection;

import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;

import com.feign.bean.user;
import com.feign.impl.FeignServiceImpl;

@FeignClient(value = &quot;provider&quot;,fallback = FeignServiceImpl.class)
public interface IFeignService {

    @GetMapping(&quot;/user/findAll&quot;)
    public Collection&lt;user&gt; findAll();

    @GetMapping(&quot;/user/index&quot;)
    public String index();
}
</code></pre>
<h2 id="⑧Hystrix容错机制"><a href="#⑧Hystrix容错机制" class="headerlink" title="⑧Hystrix容错机制"></a>⑧Hystrix容错机制</h2><p>再不改变各个微服务调用关系的前提下，针对错误情况进行预先处理</p>
<ul>
<li>设计原则<ol>
<li>服务隔离机制</li>
<li>服务降级机制</li>
<li>熔断机制</li>
<li>提供实时的监控和警报功能</li>
<li>提供实时的配置修改功能</li>
</ol>
</li>
</ul>
<p>引入依赖</p>
<pre><code class="xml"> &lt;!-- Eureka客户端依赖 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 加入feign --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 加入actuator健康监控 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;version&gt;2.0.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 添加hysteix熔断器 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 添加可视化监控组件 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;/artifactId&gt;
        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p>配置文件</p>
<pre><code class="yml">server:
  port: 8060
spring:
  application:
    name: hystrix
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
feign:
  hystrix:
    enabled: true
management:
  endpoints:
    web:
      exposure:
        include: &#39;hystrix.stream&#39;
</code></pre>
<h2 id="⑨Spring-Cloud-配置中心"><a href="#⑨Spring-Cloud-配置中心" class="headerlink" title="⑨Spring Cloud 配置中心"></a>⑨Spring Cloud 配置中心</h2><p>  Spring Cloud Config可以通过服务端为多个客户端提供配置服务。Spring Cloud Config可以将配置文件存储在本地，也可以将配置文件存储在远程仓库中。可以在不重启微服务的前提下来修改它的配置。具体操作就是创建Config Server，通过它管理所有的配置文件。</p>
<ul>
<li><p>依赖引入</p>
</li>
<li><p>配置yml</p>
</li>
</ul>
<pre><code class="xml">server:
  port: 8762
spring:
  application:
    name: nativeconfigserver
  profiles:
    active: native
  cloud:
    config:
      server:
        native:
          search-locations: classpath:/shared
</code></pre>
<ul>
<li><p>创建启动类</p>
<pre><code>package com.config;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.config.server.EnableConfigServer;

@SpringBootApplication
@EnableConfigServer
public class NativeConfigServerApplication {
    public static void main(String[] args) throws Exception {
        SpringApplication.run(NativeConfigServerApplication.class, args);
    }

}
</code></pre></li>
</ul>
<hr>
<p>重点：</p>
<p>在创建客户端后，在里面创建一个名为bootstrap.yml的配置文件（名称不能是别的，这是规定），用来读取配置中心的对应配置文件信息</p>
<p>bootstrap的配置信息如下：</p>
<pre><code class="yml">spring:
  application:
    name: configclient
  profiles:
    active: dev
  cloud:
    config:
      uri: http://localhost:8762
      fail-fast: true
</code></pre>
<p>其中，通过spring.application.name结合spring.profiles.active拼接获得目标配置文件名称configclient-dev.yml，去Config Server中查找该文件。</p>
<p><span style="color:green;font-size:30px">（拖更…）</span></p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/AliPayQR.png"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/WeChanQR.png"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2021/07/19/学习设计me式/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/img/title_pic.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/img/title_pic.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                学习设计me式（Design Pattern）</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2021/07/06/学习春天の靴子（springBoot）/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/jsjwlrigid.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/kitholt/cdn/cdn/jsjwlrigid.png">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                学习春天の靴子（springBoot）</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "vK4njxg3C8GQOr9L6M8Hav7x-gzGzoHsz",
        appKey: "e9eG1y4IcG54g4l676M1xeWQ",
        path: window.location.pathname,
        placeholder: "整点留言呗"
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/kt3.jpeg" itemprop="image" alt="" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author"></a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i></p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  

  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Kitholt Frank<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2021</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_uv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人</span>
    </div>
  </div><!-- .site-info -->
    
</footer>







<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/kitholt/cdn/img/kt3.jpeg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">KItholtFrank</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/kitholt" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            资瓷
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="8153220533"

    server="tencent"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

<script language="Javascript">
    //PC端 使右键和复制失效
    document.oncontextmenu = new Function("event.returnValue=false");
    document.onselectstart = new Function("event.returnValue=false");

    //ios
    document.oncontextmenu = function (e) {
        e.preventDefault();
    };
    document.onselectstart = function (e) {
        e.preventDefault();
    };
    //安卓
    document.addEventListener('contextmenu', function (e) {
        e.preventDefault();
    });
    document.ontouchend = function () {
        throw new Error("NO ERRPR:禁止长按弹出");
    }
</script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>

<noscript><iframe src="/blog/*>";</iframe></noscript>
<script src="https://cdn.jsdelivr.net/gh/Sanarous/files@1.151/js/click.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/piao.js"></script>
 
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"></script>

<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/clickBom.js"></script>



</html>